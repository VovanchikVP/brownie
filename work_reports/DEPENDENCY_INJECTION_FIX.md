# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:
```
Unresolved reference: inject
```

## üîç –ü—Ä–∏—á–∏–Ω–∞

–û—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π Dagger/Hilt (`@Inject`, `@Singleton`) –≤ `MeterRepository` –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

–£–±—Ä–∞–ª–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Å–¥–µ–ª–∞–ª–∏ `MeterRepository` –æ–±—ã—á–Ω—ã–º –∫–ª–∞—Å—Å–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –≤ Activity.

#### **–ë—ã–ª–æ:**
```kotlin
import javax.inject.Inject
import javax.inject.Singleton

@Singleton
class MeterRepository @Inject constructor(
    private val meterDao: MeterDao,
    private val readingDao: ReadingDao,
    private val tariffDao: TariffDao
) {
```

#### **–°—Ç–∞–ª–æ:**
```kotlin
class MeterRepository(
    private val meterDao: MeterDao,
    private val readingDao: ReadingDao,
    private val tariffDao: TariffDao
) {
```

## üìã –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### **MeterRepository.kt**

1. **–£–±—Ä–∞–ª–∏ –∏–º–ø–æ—Ä—Ç—ã:**
   ```kotlin
   // –£–¥–∞–ª–∏–ª–∏
   import javax.inject.Inject
   import javax.inject.Singleton
   ```

2. **–£–±—Ä–∞–ª–∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏:**
   ```kotlin
   // –£–¥–∞–ª–∏–ª–∏
   @Singleton
   @Inject constructor
   ```

3. **–£–ø—Ä–æ—Å—Ç–∏–ª–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:**
   ```kotlin
   // –ë—ã–ª–æ
   class MeterRepository @Inject constructor(...)
   
   // –°—Ç–∞–ª–æ
   class MeterRepository(...)
   ```

## üîß –°–æ–∑–¥–∞–Ω–∏–µ Repository –≤ Activity

### **MainActivity.kt**
```kotlin
private fun initializeDatabase() {
    database = AppDatabase.getDatabase(this)
    repository = MeterRepository(
        database.meterDao(),
        database.readingDao(),
        database.tariffDao()
    )
}
```

### **MetersActivity.kt**
```kotlin
private fun initializeDatabase() {
    database = AppDatabase.getDatabase(this)
    repository = MeterRepository(
        database.meterDao(),
        database.readingDao(),
        database.tariffDao()
    )
}
```

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ —Å–ª–æ–∂–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ DI
2. **–ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å** - —è–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
3. **–û—Ç–ª–∞–¥–∫–∞** - –ª–µ–≥—á–µ –æ—Ç—Å–ª–µ–¥–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –Ω–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ DI

## üöÄ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### **–ï—Å–ª–∏ –Ω—É–∂–µ–Ω DI –≤ –±—É–¥—É—â–µ–º:**

1. **Dagger Hilt (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
   ```gradle
   implementation 'com.google.dagger:hilt-android:2.48'
   kapt 'com.google.dagger:hilt-compiler:2.48'
   ```

2. **Koin:**
   ```gradle
   implementation 'io.insert-koin:koin-android:3.5.0'
   ```

3. **Kodein:**
   ```gradle
   implementation 'org.kodein.di:kodein-di-framework-android-x:7.19.0'
   ```

## üìö –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### **–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Activity ‚Üí Repository ‚Üí DAO ‚Üí Database
```

### **–° DI (–¥–ª—è –±—É–¥—É—â–µ–≥–æ):**
```
Activity ‚Üí DI Container ‚Üí Repository ‚Üí DAO ‚Üí Database
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. ‚úÖ –ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
2. ‚úÖ Repository —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### **–î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
- –ò–∑–±–µ–≥–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã—Ö DI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
- –°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Ç–µ—Å—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### **–î–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤:**
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Dagger Hilt
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏
- –†–∞–∑–¥–µ–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–æ –º–æ–¥—É–ª—è–º

## üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DI

### **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DI –∫–æ–≥–¥–∞:**
- –ü—Ä–æ–µ–∫—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª—å—à–∏–º (>10 –∫–ª–∞—Å—Å–æ–≤)
- –ù—É–∂–Ω–∞ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
- –ú–Ω–æ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏
- –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ >3 —á–µ–ª–æ–≤–µ–∫

### **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ DI –∫–æ–≥–¥–∞:**
- –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–æ–µ–∫—Ç
- –ú–∞–ª–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ü—Ä–æ—Ç–æ—Ç–∏–ø –∏–ª–∏ MVP
- –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ <3 —á–µ–ª–æ–≤–µ–∫